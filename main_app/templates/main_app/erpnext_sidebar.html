{% load static %}

<!-- Sidebar Header -->
<div class="sidebar-header">
    <div class="sidebar-user">
        {% if request.user.profile_pic and request.user.profile_pic.name != 'defaults/profile.png' %}
            <img src="{{ request.user.profile_pic.url }}" alt="User Avatar" class="sidebar-user-avatar" id="sidebar-avatar" onerror="showDefaultAvatar()">
            <i class="fas fa-user-circle sidebar-default-avatar" id="default-avatar" style="display: none;"></i>
        {% else %}
            <img src="" alt="User Avatar" class="sidebar-user-avatar" id="sidebar-avatar" style="display: none;">
            <i class="fas fa-user-circle sidebar-default-avatar" id="default-avatar" style="display: inline-block;"></i>
        {% endif %}
        <div class="sidebar-user-info">
            <h6>{{ user.get_full_name|default:user.username }}</h6>
            <small>
                {% if user.user_type == '1' %}
                    Admin
                {% elif user.user_type == '4' %}
                    Authority
                {% elif user.user_type == '2' %}
                    Faculty
                {% else %}
                    Student
                {% endif %}
            </small>
        </div>
    </div>
</div>

<!-- Navigation Menu -->
<div class="nav-section">
    {% if user.user_type == '1' %}
        <!-- Admin Navigation -->
        <h6 class="nav-section-title">Main</h6>
        
        <div class="nav-item">
            {% url 'admin_home' as admin_home %}
            <a href="{{ admin_home }}" class="nav-link {% if admin_home == request.path %}active{% endif %}">
                <i class="nav-icon fas fa-tachometer-alt"></i>
                <span class="nav-text">Dashboard</span>
            </a>
        </div>
        
        <div class="nav-item">
            {% url 'admin_view_profile' as admin_view_profile %}
            <a href="{{ admin_view_profile }}" class="nav-link {% if admin_view_profile == request.path %}active{% endif %}">
                <i class="fas fa-user-circle"></i>
                <span class="nav-text">Profile</span>
            </a>
        </div>

        <h6 class="nav-section-title">Academic Management</h6>
        
        <div class="nav-item has-submenu {% if 'course' in request.path %}open{% endif %}">
            <a href="#" class="nav-link">
                <i class="nav-icon fas fa-graduation-cap"></i>
                <span class="nav-text">Courses</span>
                <i class="nav-arrow fas fa-chevron-right"></i>
            </a>
            <div class="nav-submenu">
                <div class="nav-item">
                    {% url 'add_course' as add_course %}
                    <a href="{{ add_course }}" class="nav-link {% if add_course == request.path %}active{% endif %}">
                        <span class="nav-text">Add Course</span>
                    </a>
                </div>
                <div class="nav-item">
                    {% url 'manage_course' as manage_course %}
                    <a href="{{ manage_course }}" class="nav-link {% if manage_course == request.path or 'edit_course' in request.path %}active{% endif %}">
                        <span class="nav-text">Manage Courses</span>
                    </a>
                </div>
            </div>
        </div>

        <div class="nav-item has-submenu {% if 'branch' in request.path %}open{% endif %}">
            <a href="#" class="nav-link">
                <i class="nav-icon fas fa-code-branch"></i>
                <span class="nav-text">Branches</span>
                <i class="nav-arrow fas fa-chevron-right"></i>
            </a>
            <div class="nav-submenu">
                <div class="nav-item">
                    {% url 'add_branch' as add_branch %}
                    <a href="{{ add_branch }}" class="nav-link {% if add_branch == request.path %}active{% endif %}">
                        <span class="nav-text">Add Branch</span>
                    </a>
                </div>
                <div class="nav-item">
                    {% url 'manage_branch' as manage_branch %}
                    <a href="{{ manage_branch }}" class="nav-link {% if manage_branch == request.path %}active{% endif %}">
                        <span class="nav-text">Manage Branches</span>
                    </a>
                </div>
            </div>
        </div>

        <div class="nav-item has-submenu {% if 'session' in request.path %}open{% endif %}">
            <a href="#" class="nav-link">
                <i class="nav-icon fas fa-calendar-alt"></i>
                <span class="nav-text">Sessions</span>
                <i class="nav-arrow fas fa-chevron-right"></i>
            </a>
            <div class="nav-submenu">
                <div class="nav-item">
                    {% url 'add_session' as add_session %}
                    <a href="{{ add_session }}" class="nav-link {% if add_session == request.path %}active{% endif %}">
                        <span class="nav-text">Add Session</span>
                    </a>
                </div>
                <div class="nav-item">
                    {% url 'manage_session' as manage_session %}
                    <a href="{{ manage_session }}" class="nav-link {% if manage_session == request.path or 'edit_session' in request.path %}active{% endif %}">
                        <span class="nav-text">Manage Sessions</span>
                    </a>
                </div>
            </div>
        </div>

        <h6 class="nav-section-title">User Management</h6>
        
        <div class="nav-item">
            {% url 'add_staff' as add_staff %}
            <a href="{{ add_staff }}" class="nav-link {% if add_staff == request.path %}active{% endif %}">
                <i class="nav-icon fas fa-user-plus"></i>
                <span class="nav-text">Add Faculty</span>
            </a>
        </div>

        <div class="nav-item">
            {% url 'manage_staff' as manage_staff %}
            <a href="{{ manage_staff }}" class="nav-link {% if manage_staff == request.path or 'edit_staff' in request.path %}active{% endif %}">
                <i class="nav-icon fas fa-users-cog"></i>
                <span class="nav-text">Manage Faculty</span>
            </a>
        </div>

        <div class="nav-item">
            {% url 'add_student' as add_student %}
            <a href="{{ add_student }}" class="nav-link {% if add_student == request.path %}active{% endif %}">
                <i class="nav-icon fas fa-user-graduate"></i>
                <span class="nav-text">Add Student</span>
            </a>
        </div>

        <div class="nav-item">
            {% url 'manage_student' as manage_student %}
            <a href="{{ manage_student }}" class="nav-link {% if manage_student == request.path or 'edit_student' in request.path %}active{% endif %}">
                <i class="nav-icon fas fa-users"></i>
                <span class="nav-text">Manage Students</span>
            </a>
        </div>

        <h6 class="nav-section-title">Communication</h6>
        
        <div class="nav-item">
            {% url 'admin_notify_staff' as admin_notify_staff %}
            <a href="{{ admin_notify_staff }}" class="nav-link {% if admin_notify_staff == request.path %}active{% endif %}">
                <i class="nav-icon fas fa-bell"></i>
                <span class="nav-text">Notify Faculty</span>
            </a>
        </div>

        <div class="nav-item">
            {% url 'admin_notify_student' as admin_notify_student %}
            <a href="{{ admin_notify_student }}" class="nav-link {% if admin_notify_student == request.path %}active{% endif %}">
                <i class="nav-icon fas fa-bullhorn"></i>
                <span class="nav-text">Notify Students</span>
            </a>
        </div>

        <h6 class="nav-section-title">Admissions</h6>
        
        <div class="nav-item has-submenu {% if 'admissions' in request.path %}open{% endif %}">
            <a href="#" class="nav-link">
                <i class="nav-icon fas fa-user-plus"></i>
                <span class="nav-text">Admissions</span>
                <i class="nav-arrow fas fa-chevron-right"></i>
            </a>
            <div class="nav-submenu">
                <div class="nav-item">
                    {% url 'manage_admission_sessions' as manage_admission_sessions %}
                    <a href="{{ manage_admission_sessions }}" class="nav-link {% if manage_admission_sessions == request.path %}active{% endif %}">
                        <span class="nav-text">Admission Sessions</span>
                    </a>
                </div>
                <div class="nav-item">
                    {% url 'manage_admission_applications' as manage_admission_applications %}
                    <a href="{{ manage_admission_applications }}" class="nav-link {% if 'applications' in request.path %}active{% endif %}">
                        <span class="nav-text">Applications</span>
                    </a>
                </div>
            </div>
        </div>

        <h6 class="nav-section-title">Fee & Finance</h6>
        
        <div class="nav-item has-submenu {% if 'fees' in request.path %}open{% endif %}">
            <a href="#" class="nav-link">
                <i class="nav-icon fas fa-rupee-sign"></i>
                <span class="nav-text">Fee Management</span>
                <i class="nav-arrow fas fa-chevron-right"></i>
            </a>
            <div class="nav-submenu">
                <div class="nav-item">
                    {% url 'manage_fee_structures' as manage_fee_structures %}
                    <a href="{{ manage_fee_structures }}" class="nav-link {% if 'structures' in request.path %}active{% endif %}">
                        <span class="nav-text">Fee Structures</span>
                    </a>
                </div>
                <div class="nav-item">
                    {% url 'student_fee_list' as student_fee_list %}
                    <a href="{{ student_fee_list }}" class="nav-link {% if 'student' in request.path and 'fees' in request.path %}active{% endif %}">
                        <span class="nav-text">Student Fees</span>
                    </a>
                </div>
                <div class="nav-item">
                    {% url 'fee_payment_history' as fee_payment_history %}
                    <a href="{{ fee_payment_history }}" class="nav-link {% if 'payments' in request.path %}active{% endif %}">
                        <span class="nav-text">Payment History</span>
                    </a>
                </div>
                <!-- Fee Defaulters removed per admin request -->
            </div>
        </div>

        <h6 class="nav-section-title">Reports & Analytics</h6>
        
        <div class="nav-item">
            {% url 'admin_view_attendance' as admin_view_attendance %}
            <a href="{{ admin_view_attendance }}" class="nav-link {% if admin_view_attendance == request.path %}active{% endif %}">
                <i class="nav-icon fas fa-chart-line"></i>
                <span class="nav-text">View Attendance</span>
            </a>
        </div>

        <div class="nav-item">
            {% url 'student_feedback_message' as student_feedback_message %}
            <a href="{{ student_feedback_message }}" class="nav-link {% if student_feedback_message == request.path %}active{% endif %}">
                <i class="nav-icon fas fa-comments"></i>
                <span class="nav-text">Student Feedback</span>
            </a>
        </div>

        <div class="nav-item">
            {% url 'staff_feedback_message' as staff_feedback_message %}
            <a href="{{ staff_feedback_message }}" class="nav-link {% if staff_feedback_message == request.path %}active{% endif %}">
                <i class="nav-icon fas fa-comment-dots"></i>
                <span class="nav-text">Faculty Feedback</span>
            </a>
        </div>

        <h6 class="nav-section-title">Company Internships</h6>

        <div class="nav-item">
            {% url 'add_company_internship' as add_company_internship %}
            <a href="{{ add_company_internship }}" class="nav-link {% if add_company_internship == request.path %}active{% endif %}">
                <i class="nav-icon fas fa-plus-circle"></i>
                <span class="nav-text">Add Internship</span>
            </a>
        </div>

        <div class="nav-item">
            {% url 'manage_company_internships' as manage_company_internships %}
            <a href="{{ manage_company_internships }}" class="nav-link {% if manage_company_internships == request.path %}active{% endif %}">
                <i class="nav-icon fas fa-building"></i>
                <span class="nav-text">Manage Internships</span>
            </a>
        </div>

        <h6 class="nav-section-title">Leave Management</h6>
        
        <div class="nav-item">
            {% url 'view_staff_leave' as view_staff_leave %}
            <a href="{{ view_staff_leave }}" class="nav-link {% if view_staff_leave == request.path %}active{% endif %}">
                <i class="nav-icon fas fa-calendar-check"></i>
                <span class="nav-text">Faculty Leave</span>
            </a>
        </div>

        <div class="nav-item">
            {% url 'view_student_leave' as view_student_leave %}
            <a href="{{ view_student_leave }}" class="nav-link {% if view_student_leave == request.path %}active{% endif %}">
                <i class="nav-icon fas fa-calendar-times"></i>
                <span class="nav-text">Student Leave</span>
            </a>
        </div>

    {% elif user.user_type == '4' %}
        <!-- Authority Navigation -->
        <h6 class="nav-section-title">Main</h6>

        <div class="nav-item">
            {% url 'authority_home' as authority_home %}
            <a href="{{ authority_home }}" class="nav-link {% if authority_home == request.path %}active{% endif %}">
                <i class="nav-icon fas fa-tachometer-alt"></i>
                <span class="nav-text">Dashboard</span>
            </a>
        </div>

        <div class="nav-item">
            {% url 'authority_view_profile' as authority_view_profile %}
            <a href="{{ authority_view_profile }}" class="nav-link {% if authority_view_profile == request.path %}active{% endif %}">
                <i class="fas fa-user-circle"></i>
                <span class="nav-text">Profile</span>
            </a>
        </div>

        <h6 class="nav-section-title">Governance</h6>

        <div class="nav-item">
            {% url 'authority_grievance_list' as authority_grievance_list %}
            <a href="{{ authority_grievance_list }}" class="nav-link {% if authority_grievance_list == request.path %}active{% endif %}">
                <i class="nav-icon fas fa-balance-scale"></i>
                <span class="nav-text">Grievance Desk</span>
            </a>
        </div>

    {% elif user.user_type == '2' %}
        <!-- Faculty Navigation -->
        <h6 class="nav-section-title">Main</h6>
        
        <div class="nav-item">
            {% url 'staff_home' as staff_home %}
            <a href="{{ staff_home }}" class="nav-link {% if staff_home == request.path %}active{% endif %}">
                <i class="nav-icon fas fa-tachometer-alt"></i>
                <span class="nav-text">Dashboard</span>
            </a>
        </div>
        
        <div class="nav-item">
            {% url 'staff_view_profile' as staff_view_profile %}
            <a href="{{ staff_view_profile }}" class="nav-link {% if staff_view_profile == request.path %}active{% endif %}">
                <i class="fas fa-user-circle"></i>
                <span class="nav-text">Profile</span>
            </a>
        </div>

        <h6 class="nav-section-title">Academic Management</h6>
        
        <div class="nav-item">
            {% url 'staff_add_result' as staff_add_result %}
            <a href="{{ staff_add_result }}" class="nav-link {% if staff_add_result == request.path %}active{% endif %}">
                <i class="nav-icon fas fa-plus-circle"></i>
                <span class="nav-text">Add Result</span>
            </a>
        </div>

        <div class="nav-item">
            {% url 'edit_student_result' as edit_student_result %}
            <a href="{{ edit_student_result }}" class="nav-link {% if edit_student_result == request.path %}active{% endif %}">
                <i class="nav-icon fas fa-edit"></i>
                <span class="nav-text">Edit Results</span>
            </a>
        </div>

        <div class="nav-item">
            {% url 'staff_course_notes' as staff_course_notes %}
            <a href="{{ staff_course_notes }}" class="nav-link {% if staff_course_notes == request.path %}active{% endif %}">
                <i class="nav-icon fas fa-book"></i>
                <span class="nav-text">Course Notes</span>
            </a>
        </div>

        <h6 class="nav-section-title">Attendance</h6>
        
        <div class="nav-item">
            {% url 'staff_take_attendance' as staff_take_attendance %}
            <a href="{{ staff_take_attendance }}" class="nav-link {% if staff_take_attendance == request.path %}active{% endif %}">
                <i class="nav-icon fas fa-check-circle"></i>
                <span class="nav-text">Take Attendance</span>
            </a>
        </div>

        <div class="nav-item">
            {% url 'staff_update_attendance' as staff_update_attendance %}
            <a href="{{ staff_update_attendance }}" class="nav-link {% if staff_update_attendance == request.path %}active{% endif %}">
                <i class="nav-icon fas fa-calendar-edit"></i>
                <span class="nav-text">Update Attendance</span>
            </a>
        </div>

        <h6 class="nav-section-title">Course Enrollment</h6>

        <div class="nav-item">
            {% url 'staff_course_requests' as staff_course_requests %}
            <a href="{{ staff_course_requests }}" class="nav-link {% if staff_course_requests == request.path %}active{% endif %}">
                <i class="nav-icon fas fa-user-check"></i>
                <span class="nav-text">Enrollment Requests</span>
            </a>
        </div>

        <h6 class="nav-section-title">Opportunities</h6>

        <div class="nav-item">
            {% url 'staff_opportunity_list' as staff_opportunity_list %}
            <a href="{{ staff_opportunity_list }}" class="nav-link {% if staff_opportunity_list == request.path %}active{% endif %}">
                <i class="nav-icon fas fa-briefcase"></i>
                <span class="nav-text">Manage Opportunities</span>
            </a>
        </div>

        <div class="nav-item">
            {% url 'staff_opportunity_create' as staff_opportunity_create %}
            <a href="{{ staff_opportunity_create }}" class="nav-link {% if staff_opportunity_create == request.path %}active{% endif %}">
                <i class="nav-icon fas fa-plus-circle"></i>
                <span class="nav-text">Post Opportunity</span>
            </a>
        </div>

        <h6 class="nav-section-title">Library & Resources</h6>
        
        <div class="nav-item">
            {% url 'add_book' as add_book %}
            <a href="{{ add_book }}" class="nav-link {% if add_book == request.path %}active{% endif %}">
                <i class="nav-icon fas fa-book-open"></i>
                <span class="nav-text">Add Books</span>
            </a>
        </div>

        <h6 class="nav-section-title">Communication</h6>
        
        <div class="nav-item">
            {% url 'staff_view_notification' as staff_view_notification %}
            <a href="{{ staff_view_notification }}" class="nav-link {% if staff_view_notification == request.path %}active{% endif %}">
                <i class="nav-icon fas fa-bell"></i>
                <span class="nav-text">Notifications</span>
            </a>
        </div>

        <div class="nav-item">
            {% url 'staff_apply_leave' as staff_apply_leave %}
            <a href="{{ staff_apply_leave }}" class="nav-link {% if staff_apply_leave == request.path %}active{% endif %}">
                <i class="nav-icon fas fa-calendar-plus"></i>
                <span class="nav-text">Apply for Leave</span>
            </a>
        </div>

        <div class="nav-item">
            {% url 'staff_feedback' as staff_feedback %}
            <a href="{{ staff_feedback }}" class="nav-link {% if staff_feedback == request.path %}active{% endif %}">
                <i class="nav-icon fas fa-comment-alt"></i>
                <span class="nav-text">Feedback</span>
            </a>
        </div>

        <h6 class="nav-section-title">Course Community</h6>

        <div class="nav-item">
            {% url 'staff_ride_share_moderation' as staff_ride_share_moderation %}
            <a href="{{ staff_ride_share_moderation }}" class="nav-link {% if staff_ride_share_moderation == request.path %}active{% endif %}">
                <i class="nav-icon fas fa-car"></i>
                <span class="nav-text">Ride Sharing (Moderate)</span>
            </a>
        </div>

        <div class="nav-item">
            {% url 'staff_lost_found_moderation' as staff_lost_found_moderation %}
            <a href="{{ staff_lost_found_moderation }}" class="nav-link {% if staff_lost_found_moderation == request.path %}active{% endif %}">
                <i class="nav-icon fas fa-search"></i>
                <span class="nav-text">Lost & Found (Moderate)</span>
            </a>
        </div>

        <div class="nav-item">
            {% url 'staff_forum_moderation' as staff_forum_moderation %}
            <a href="{{ staff_forum_moderation }}" class="nav-link {% if staff_forum_moderation == request.path %}active{% endif %}">
                <i class="nav-icon fas fa-comments"></i>
                <span class="nav-text">Forum (Moderate)</span>
            </a>
        </div>

    {% else %}
        <!-- Student Navigation -->
        <h6 class="nav-section-title">Main</h6>
        
        <div class="nav-item">
            {% url 'student_home' as student_home %}
            <a href="{{ student_home }}" class="nav-link {% if student_home == request.path %}active{% endif %}">
                <i class="nav-icon fas fa-tachometer-alt"></i>
                <span class="nav-text">Dashboard</span>
            </a>
        </div>
        
        <div class="nav-item">
            {% url 'student_view_profile' as student_view_profile %}
            <a href="{{ student_view_profile }}" class="nav-link {% if student_view_profile == request.path %}active{% endif %}">
                <i class="fas fa-user-circle"></i>
                <span class="nav-text">Profile</span>
            </a>
        </div>

        <h6 class="nav-section-title">Governance</h6>

        <div class="nav-item">
            {% url 'student_grievance_submit' as student_grievance_submit %}
            <a href="{{ student_grievance_submit }}" class="nav-link {% if student_grievance_submit == request.path %}active{% endif %}">
                <i class="nav-icon fas fa-pen"></i>
                <span class="nav-text">Submit Grievance</span>
            </a>
        </div>

        <div class="nav-item">
            {% url 'student_grievance_list' as student_grievance_list %}
            <a href="{{ student_grievance_list }}" class="nav-link {% if student_grievance_list == request.path %}active{% endif %}">
                <i class="nav-icon fas fa-list"></i>
                <span class="nav-text">My Grievances</span>
            </a>
        </div>

        <h6 class="nav-section-title">Opportunities</h6>

        <div class="nav-item">
            {% url 'student_opportunity_list' as student_opportunity_list %}
            <a href="{{ student_opportunity_list }}" class="nav-link {% if student_opportunity_list == request.path %}active{% endif %}">
                <i class="nav-icon fas fa-briefcase"></i>
                <span class="nav-text">Browse Opportunities</span>
            </a>
        </div>

        <div class="nav-item">
            {% url 'student_my_applications' as student_my_applications %}
            <a href="{{ student_my_applications }}" class="nav-link {% if student_my_applications == request.path %}active{% endif %}">
                <i class="nav-icon fas fa-clipboard-check"></i>
                <span class="nav-text">My Applications</span>
            </a>
        </div>

        <h6 class="nav-section-title">Company Internships</h6>

        <div class="nav-item">
            {% url 'student_view_internships' as student_view_internships %}
            <a href="{{ student_view_internships }}" class="nav-link {% if student_view_internships == request.path %}active{% endif %}">
                <i class="nav-icon fas fa-building"></i>
                <span class="nav-text">Browse Internships</span>
            </a>
        </div>

        <div class="nav-item">
            {% url 'student_internship_applications' as student_internship_applications %}
            <a href="{{ student_internship_applications }}" class="nav-link {% if student_internship_applications == request.path %}active{% endif %}">
                <i class="nav-icon fas fa-file-alt"></i>
                <span class="nav-text">My Internship Apps</span>
            </a>
        </div>

        <h6 class="nav-section-title">Academic</h6>
        
        <div class="nav-item">
            {% url 'student_request_course' as student_request_course %}
            <a href="{{ student_request_course }}" class="nav-link {% if student_request_course == request.path %}active{% endif %}">
                <i class="nav-icon fas fa-graduation-cap"></i>
                <span class="nav-text">Request Course</span>
            </a>
        </div>

        <div class="nav-item">
            {% url 'student_course_requests' as student_course_requests %}
            <a href="{{ student_course_requests }}" class="nav-link {% if student_course_requests == request.path %}active{% endif %}">
                <i class="nav-icon fas fa-list-alt"></i>
                <span class="nav-text">My Course Requests</span>
            </a>
        </div>
        
        <div class="nav-item">
            {% url 'student_view_attendance' as student_view_attendance %}
            <a href="{{ student_view_attendance }}" class="nav-link {% if student_view_attendance == request.path %}active{% endif %}">
                <i class="nav-icon fas fa-calendar-check"></i>
                <span class="nav-text">View Attendance</span>
            </a>
        </div>

        <div class="nav-item">
            {% url 'student_view_result' as student_view_result %}
            <a href="{{ student_view_result }}" class="nav-link {% if student_view_result == request.path %}active{% endif %}">
                <i class="nav-icon fas fa-chart-bar"></i>
                <span class="nav-text">View Results</span>
            </a>
        </div>

        <h6 class="nav-section-title">Course Community</h6>

        <div class="nav-item">
            {% url 'student_ride_share' as student_ride_share %}
            <a href="{{ student_ride_share }}" class="nav-link {% if student_ride_share == request.path %}active{% endif %}">
                <i class="nav-icon fas fa-car"></i>
                <span class="nav-text">Ride Sharing</span>
            </a>
        </div>

        <div class="nav-item">
            {% url 'student_lost_found' as student_lost_found %}
            <a href="{{ student_lost_found }}" class="nav-link {% if student_lost_found == request.path %}active{% endif %}">
                <i class="nav-icon fas fa-search"></i>
                <span class="nav-text">Lost & Found</span>
            </a>
        </div>

        <div class="nav-item">
            {% url 'student_forum' as student_forum %}
            <a href="{{ student_forum }}" class="nav-link {% if student_forum == request.path %}active{% endif %}">
                <i class="nav-icon fas fa-comments"></i>
                <span class="nav-text">Discussion Forum</span>
            </a>
        </div>

        <h6 class="nav-section-title">Library & Resources</h6>
        
        <div class="nav-item">
            {% url 'view_books' as view_books %}
            <a href="{{ view_books }}" class="nav-link {% if view_books == request.path %}active{% endif %}">
                <i class="nav-icon fas fa-book"></i>
                <span class="nav-text">Library Books</span>
            </a>
        </div>

        <h6 class="nav-section-title">Communication</h6>
        
        <div class="nav-item">
            {% url 'student_view_notification' as student_view_notification %}
            <a href="{{ student_view_notification }}" class="nav-link {% if student_view_notification == request.path %}active{% endif %}">
                <i class="nav-icon fas fa-bell"></i>
                <span class="nav-text">Notifications</span>
            </a>
        </div>

        <div class="nav-item">
            {% url 'student_apply_leave' as student_apply_leave %}
            <a href="{{ student_apply_leave }}" class="nav-link {% if student_apply_leave == request.path %}active{% endif %}">
                <i class="nav-icon fas fa-calendar-plus"></i>
                <span class="nav-text">Apply for Leave</span>
            </a>
        </div>

        <div class="nav-item">
            {% url 'student_feedback' as student_feedback %}
            <a href="{{ student_feedback }}" class="nav-link {% if student_feedback == request.path %}active{% endif %}">
                <i class="nav-icon fas fa-comment-alt"></i>
                <span class="nav-text">Feedback</span>
            </a>
        </div>
    {% endif %}
</div>

<script>
function showDefaultAvatar() {
    // Hide the broken image
    document.getElementById('sidebar-avatar').style.display = 'none';
    // Show the default FontAwesome icon
    document.getElementById('default-avatar').style.display = 'inline-block';
}

// Also check if profile_pic is empty or null and show default avatar
document.addEventListener('DOMContentLoaded', function() {
    const avatar = document.getElementById('sidebar-avatar');
    const defaultAvatar = document.getElementById('default-avatar');
    
    // Check if src is empty, null, or just whitespace
    if (!avatar.src || avatar.src.trim() === '' || avatar.src === window.location.href) {
        avatar.style.display = 'none';
        defaultAvatar.style.display = 'inline-block';
    }
});
</script>

